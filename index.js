import*as t from"react-dom/server";import e from"jquery";export async function DownloadUrl(t,e){fetch(t,{mode:"no-cors"}).then(t=>t.blob()).then(t=>{let n=window.URL.createObjectURL(t),i=document.createElement("a");i.style.display="none",i.href=n,i.download=e,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(n)}).catch(()=>alert("oh no!"))}export function FileToBase64(t,e){let n=new FileReader;n.onload=()=>e(n.result),n.readAsDataURL(t)}export function HandleBackButton(t=()=>{}){window.history.pushState({},""),window.history.pushState({},""),window.onpopstate=function(e){window.history.pushState({},""),t()}}export function GetClient(t){return"ontouchstart"in document.documentElement?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[t.clientX,t.clientY]}export function ExportToExcel(t,e={}){let{promptText:n="Inter Excel File Name"}=e;return({fixPersianAndArabicNumbers(t){if("string"!=typeof t)return t;for(var e=[/۰/g,/۱/g,/۲/g,/۳/g,/۴/g,/۵/g,/۶/g,/۷/g,/۸/g,/۹/g],n=[/٠/g,/١/g,/٢/g,/٣/g,/٤/g,/٥/g,/٦/g,/٧/g,/٨/g,/٩/g],i=0;i<10;i++)t=t.replace(e[i],i).replace(n[i],i);return t},getJSON(t){let e=[];for(let n=0;n<t.length;n++){let i=t[n],o={};for(let r in i)o[r]=this.fixPersianAndArabicNumbers(i[r]);e.push(o)}return e},export(){let e=window.prompt(n);if(e&&null!==e&&e.length){var i=this.getJSON(t),o="object"!=typeof i?JSON.parse(i):i,r="";r+="\r\n\n";{let s="";for(let l in o[0])s+=l+",";r+=(s=s.slice(0,-1))+"\r\n"}for(var a=0;a<o.length;a++){let u="";for(let c in o[a])u+='"'+o[a][c]+'",';u.slice(0,u.length-1),r+=u+"\r\n"}if(""===r){alert("Invalid data");return}var h=e.replace(/ /g,"_"),d="data:text/csv;charset=utf-8,"+encodeURIComponent("\uFEFF"+r),p=document.createElement("a");p.href=d,p.style="visibility:hidden",p.download=h+".csv",document.body.appendChild(p),p.click(),document.body.removeChild(p)}}}).export()}export function SplitNumber(t,e=3,n=","){if(!t)return t;let i=t.toString(),o=i.indexOf(".");-1!==o&&(i=i.slice(0,o));let r="",s=0;for(let l=i.length-1;l>=0;l--)r=i[l]+r,s===e-1?(s=0,l>0&&(r=n+r)):s++;return r}export function Swip({dom:t,start:n=()=>{},move:i=()=>{},end:o=()=>{},speedX:r=1,speedY:s=1,stepX:l=1,stepY:a=1,id:u}){let c={timeout:void 0,count:0,getDom:()=>t(),getClient:t=>"ontouchstart"in document.documentElement?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.clientX,y:t.clientY},eventHandler(t,n,i,o="bind"){n="ontouchstart"in document.documentElement?({mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"})[n]:n;var r="string"==typeof t?"window"===t?e(window):e(t):t;r.unbind(n,i),"bind"===o&&r.bind(n,i)},init(){if(c.count++,c.count>10){clearTimeout(c.timeout);return}t().length?(clearTimeout(c.timeout),this.eventHandler(c.getDom(),"mousedown",e.proxy(this.mouseDown,this))):c.timeout=setTimeout(()=>c.init(),400)},getPercentByValue:(t,e,n)=>100*(t-e)/(n-e),getMousePosition(t){let e=this.getClient(t),n=e.x-this.left,i=e.y-this.top,o=this.getPercentByValue(n,0,this.width),r=this.getPercentByValue(i,0,this.height);return{xp:o,yp:r,clientX:e.x,clientY:e.y,x:n,y:i}},mouseDown(t){let i=c.getDom(),o=i.offset();this.width=i.width(),this.height=i.height(),this.left=o.left,this.top=o.top;let r=this.getMousePosition(t);this.so={client:{x:r.clientX,y:r.clientY}};let s=n({mousePosition:{...r},id:u});if(!Array.isArray(s))return;let l=s[0],a=s[1];this.so.x=l,this.so.y=a,this.eventHandler("window","mousemove",e.proxy(this.mouseMove,this)),this.eventHandler("window","mouseup",e.proxy(this.mouseUp,this))},mouseMove(t){let e=this.getClient(t),n=e.x-this.so.client.x,o=e.y-this.so.client.y;if(n=Math.round(n*r),o=Math.round(o*s),n=Math.floor(n/l)*l,o=Math.floor(o/a)*a,n===this.dx&&o===this.dy)return;this.dx=n,this.dy=o;let c=Math.round(Math.sqrt(Math.pow(n,2)+Math.pow(o,2)));this.dist=c;let h,d;void 0!==this.so.x&&void 0!==this.so.y&&(h=this.so.x+n,d=this.so.y+o),i({dx:n,dy:o,dist:c,x:h,y:d,id:u,mousePosition:{...this.getMousePosition(t)},e:t})},mouseUp(t){this.eventHandler("window","mousemove",this.mouseMove,"unbind"),this.eventHandler("window","mouseup",this.mouseUp,"unbind"),o({dx:this.dx,dy:this.dy,dist:this.dist,id:u,e:t})}};c.init()}export function URLToJSON(t){try{return JSON.parse(`{"${decodeURI(t.split("?")[1]).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')}"}`)}catch{return{}}}export function JSXToHTML(e){return t.renderToStaticMarkup(e)}export async function Copy(t){window.navigator.clipboard.writeText(t)}export function IsTouch(){return"ontouchstart"in document.documentElement}export async function Paste(){try{return window.navigator.clipboard.read()}catch(t){console.log(t.message)}}export function Search(t,e,n=t=>t){if(!e)return t;let i=e.split(" ");return t.filter((t,e)=>(function t(e,n){for(let i=0;i<e.length;i++){let o=e[i];if(-1===n.indexOf(o))return!1}return!0})(i,n(t,e)))}export function GenerateComponsition({level:t=4,length:e=4,childsField:n="childs",fields:i={}}){let o={generate(r=0,s=""){if(r>=t)return[];let l=[];for(let a=0;a<e;a++){let u=s+"-"+a,c={id:"aa"+Math.round(1e4*Math.random()),[n]:o.generate(r+1,u)};for(let h in i)c[h]=i[h]+s;l.push(c)}return l}};return o.generate()}export function CalculateDistance(t,e,n,i){let o=toRadians(n-t),r=toRadians(i-e),s=Math.sin(o/2)*Math.sin(o/2)+Math.cos(toRadians(t))*Math.cos(toRadians(n))*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))}function toRadians(t){return t*(Math.PI/180)}export function JsonValidator(t,e){return({getType:t=>-1!==["string","number","boolean","array","object","null","undefined"].indexOf(t)?t:Array.isArray(t)?"array":typeof t,getSchemaTypes:t=>"string"==typeof t&&-1!==t.indexOf("|")?t.split("|"):[t],compaire(t,e,n){let i=this.getSchemaTypes(e),o=this.getType(t),r=!1;for(let s=0;s<i.length;s++){let l=i[s];-1!==["string","number","boolean","array","object","null","undefined"].indexOf(l)?o===l&&(r=!0):"object"==typeof l?o===this.getType(l)&&(r=!0):t===l&&(r=!0)}if(!r)return`${n} must be ${i.join(" or ")}`},validate(t,e,n="data"){let i=this.compaire(t,e,n);if(i)return i;if("object"==typeof e){if(Array.isArray(t))for(let o=0;o<t.length;o++){let r=t[o],s=e[o]||e[0],l=this.validate(r,s,`${n}[${o}]`);if(l)return l}else{for(let a in t){let u=t[a],c=e[a],h=this.validate(u,c,`${n}.${a}`);if(h)return h}for(let d in e){let p=t[d],f=e[d],g=this.validate(p,f,`${n}.${d}`);if(g)return g}}}}}).validate(t,e)}